{"version":3,"file":"main.js","mappings":"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","sources":["webpack://winter-sports/./apps/api/src/app/game/game.ts","webpack://winter-sports/./apps/api/src/app/gamesManager/gamesManager.ts","webpack://winter-sports/./apps/api/src/app/lifecycle.ts","webpack://winter-sports/./apps/api/src/app/queue/queue.ts","webpack://winter-sports/./apps/api/src/main.ts","webpack://winter-sports/./libs/game-lib/src/index.ts","webpack://winter-sports/./libs/game-lib/src/lib/game-lib.ts","webpack://winter-sports/./libs/game-lib/src/lib/interfaces.ts","webpack://winter-sports/./libs/game-lib/src/lib/src/input.ts","webpack://winter-sports/./libs/game-lib/src/lib/src/misc/skybox.ts","webpack://winter-sports/./libs/game-lib/src/lib/src/misc/smoothAnimations.ts","webpack://winter-sports/./libs/game-lib/src/lib/src/misc/uv.ts","webpack://winter-sports/./libs/game-lib/src/lib/src/modes/soccer/ball.ts","webpack://winter-sports/./libs/game-lib/src/lib/src/modes/soccer/player.ts","webpack://winter-sports/./libs/game-lib/src/lib/src/modes/soccer/soccer.ts","webpack://winter-sports/./libs/game-lib/src/lib/src/modes/soccer/soccerFSM.ts","webpack://winter-sports/./libs/game-lib/src/lib/src/modes/soccer/soccerUI.ts","webpack://winter-sports/./libs/game-lib/src/lib/src/modes/soccer/world.ts","webpack://winter-sports/./libs/game-lib/src/lib/src/player/camera.ts","webpack://winter-sports/./libs/game-lib/src/lib/src/player/nameplate.ts","webpack://winter-sports/./libs/game-lib/src/lib/src/player/player.ts","webpack://winter-sports/./libs/game-lib/src/lib/src/player/render.ts","webpack://winter-sports/external commonjs \"ammo.js\"","webpack://winter-sports/external commonjs \"babylonjs\"","webpack://winter-sports/external commonjs \"babylonjs-gui\"","webpack://winter-sports/external commonjs \"babylonjs-loaders\"","webpack://winter-sports/external commonjs \"cookie-parser\"","webpack://winter-sports/external commonjs \"dayjs\"","webpack://winter-sports/external commonjs \"dayjs/plugin/duration\"","webpack://winter-sports/external commonjs \"express\"","webpack://winter-sports/external commonjs \"gsap\"","webpack://winter-sports/external commonjs \"path\"","webpack://winter-sports/external commonjs \"rxjs\"","webpack://winter-sports/external commonjs \"socket.io\"","webpack://winter-sports/external commonjs \"tslib\"","webpack://winter-sports/external node-commonjs \"http\"","webpack://winter-sports/webpack/bootstrap","webpack://winter-sports/webpack/before-startup","webpack://winter-sports/webpack/startup","webpack://winter-sports/webpack/after-startup"],"sourcesContent":["import { PlayerSocket } from '../../types/player-socket.interface';\nimport * as BABYLON from 'babylonjs';\nimport { Game as GameInstance, IInputMap } from '@winter-sports/game-lib';\nimport dayjs from 'dayjs';\nimport duration from 'dayjs/plugin/duration'\nimport { BehaviorSubject, Subject } from 'rxjs';\nimport gamesManager from '../gamesManager/gamesManager';\ndayjs.extend(duration)\nexport class Game {\n    engine: BABYLON.Engine\n    game: GameInstance\n \n    players: PlayerSocket[] = []\n    gameHealth = this.checkHealth.bind(this)\n\n    intervalId: NodeJS.Timeout;\n\n    emitter = new Subject<{ event: string; args: any}>()\n    constructor(players: PlayerSocket[], private gameMode: string) {\n        for(let player of players) {\n            this.addPlayer(player)\n        }\n        this.engine = new BABYLON.NullEngine()\n        this.game = new GameInstance(this.engine)\n\n        this.intervalId = setInterval(this.gameHealth, 1000)\n    }\n\n\n    addPlayer(player: PlayerSocket) {\n        player.on('disconnect', () => {\n            this.players = this.players.filter(p => p.id !== player.id)\n        })\n        player.on('i', (i: IInputMap) => {\n            const currentPlayer = this.game.mode.players.find(p => p.id === player.id)\n            currentPlayer.inputs = i\n        })\n        this.players.push(player)\n    }\n\n    async init() {\n        await this.game.init()\n        this.emitter = this.game.emitter\n        this.emitter.subscribe((req) => {\n            for(let player of this.players) player.emit(req.event, req.args)\n        })\n        this.game.setMode(this.gameMode)\n        this.game.mode.addPlayers(this.players)\n    }\n\n    checkHealth() {\n        if(this.players.length === 0) {\n            console.log(\"GAME DESTROYED\")\n            this.stop()\n        }\n        else { console.log(\"GAME HEALTHY\")}\n    }\n\n    stop() {\n        clearInterval(this.intervalId)\n        this.game.scene.dispose()\n        this.engine.dispose()\n        gamesManager.remove(this)\n    }\n\n\n}","import { PlayerSocket } from '../../types/player-socket.interface';\nimport { Game } from '../game/game';\n\nclass GamesManager {\n    games: Game[] = []\n    constructor() {\n        console.log(\"Game manager ON\")\n    }\n\n    async createGame(players: PlayerSocket[], gameMode: string) {\n        const game = new Game(players, gameMode)\n        await game.init()\n        this.games.push(game)\n        return game\n    }\n\n    remove(game: Game) {\n        this.games = this.games.filter(g => g !== game)\n    }\n}\n\nexport default new GamesManager()","import { io } from \"../main\";\nimport { PlayerSocket } from \"../types/player-socket.interface\";\nimport queue from \"./queue/queue\";\n\nio.on('connection', (socket: PlayerSocket) => {\n    console.log(\"New client\", socket.id)\n\n    socket.on('disconnect', () => {\n        queue.removePlayer(socket)\n        console.log(\"Client left\", socket.id)\n    })\n\n    socket.on('queue', (gameModes: string[] = ['Soccer']) => {\n        queue.addPlayer(socket, gameModes)\n    })\n\n    socket.on('pseudo', (pseudo: string) => {\n        socket.pseudo = pseudo\n        socket.emit('pseudoSet', pseudo)\n    })\n\n    socket.on('leaveQueue', () => {\n        queue.removePlayer(socket)\n    })\n});","import gamesManager from '../gamesManager/gamesManager';\nimport { PlayerSocket } from './../../types/player-socket.interface';\n\nclass Queue {\n    players: PlayerSocket[] = []\n    loopIntervalId: NodeJS.Timeout\n    gameModes = ['Soccer']\n    minPlayers = 1\n    constructor() {\n        this.loopIntervalId = setInterval(() => {\n            this.checkQueue()\n            this.queueState()\n        }, 2000)\n    }\n\n    checkQueue() {\n        for (let gameMode of this.gameModes.reverse()) {\n            const queue = this.players.filter(p => p.gamesModes.includes(gameMode))\n            for (let i = 0; i < Math.floor(queue.length / this.minPlayers); i++) {\n                console.log(\"CREATING A GAME mode :\", gameMode)\n                const players = queue.splice(0, this.minPlayers)\n                this.createGame(players, gameMode)\n                this.players = this.players.filter(p => !players.includes(p))\n            }\n        }\n        \n    }\n\n    createGame(players: PlayerSocket[], gameMode: string) {\n        console.log(\"CREATING GAME...\")\n        const game = gamesManager.createGame(players, gameMode)\n        console.log(`${gamesManager.games.length} total games`)\n        return game\n    }\n\n    addPlayer(socket: PlayerSocket, gameModes: string[]) {\n        if (this.players.find(player => player === socket)) return\n        socket.gamesModes = gameModes\n        this.players.push(socket)\n        console.log(`${this.players.length} in queue for ${socket.gamesModes.join(' & ')}`)\n        this.sendQueueStateToPlayer(socket)\n    }\n\n    removePlayer(socket: PlayerSocket) {\n        this.players = this.players.filter(player => player !== socket)\n        socket.emit('queueLeft')\n    }\n\n    queueState() {\n        for (let player of this.players) {\n            this.sendQueueStateToPlayer(player)\n        }\n    }\n\n    sendQueueStateToPlayer(socket: PlayerSocket) {\n        socket.volatile.emit('queueState', {\n            inQueue: this.players.length,\n            position: this.players.findIndex(player => player === socket) + 1,\n            gameModes: socket.gamesModes || [],\n            inQueueSoccer: this.players.filter(p => p.gamesModes.includes('Soccer')).length,\n        })\n    }\n}\n\nexport default new Queue()","import express, { Application } from 'express';\nimport path from 'path';\nimport SocketIO from \"socket.io\";\n\nconst app: Application = express();\n\nconst cookieParser = require('cookie-parser')\nconst socketIO = require('socket.io');\nconst http = require('http');\nconst server = http.createServer(app);\n\nexport const io: SocketIO.Server = socketIO(server, {\n  path: \"/api/socket/\",\n  transports: ['websocket', 'polling'],\n});\n\napp.get('/api', (req, res) => {\n  res.send({ version: process.env.NX_VERSION });\n});\n\napp.use('/', express.static(path.join(__dirname, '../game/')))\napp.use('*', (req, res) => {\n  res.sendFile(path.join(__dirname, '../game/index.html'))\n})\n\napp.use(cookieParser());\napp.use(express.json());\napp.use(express.urlencoded({\n    extended: true\n}));\n\n\nconst port = process.env.PORT || 3333;\n\nserver.listen(port);\n\nserver.on('error', console.error);\n\nrequire('./app/lifecycle')\n","export * from './lib/game-lib';\nexport * from './lib/interfaces';\n// export * from './lib/src/player';\n// export * from './lib/src/soccer';\nexport * from './lib/src/modes/soccer/soccer'\n\nexport const TICK_RATE = 60","import * as BABYLON from 'babylonjs';\nimport Ammo from 'ammo.js';\nimport { IGameOptions } from '..';\nimport { Input } from './src/input';\nimport { IInputMap } from '@winter-sports/game-lib';\nimport { Playground } from './src/modes/playground/playground';\nimport { Skybox } from './src/misc/skybox';\nimport { Soccer } from './src/modes/soccer/soccer';\nimport { BehaviorSubject, Subject } from 'rxjs';\nimport { SoccerPlayer } from './src/modes/soccer/player';\nBABYLON.Animation.AllowMatricesInterpolation = true;\nexport class Game {\n  canvas?: HTMLCanvasElement\n  server: boolean = false;\n  scene!: BABYLON.Scene\n  camera!: BABYLON.Camera\n  skybox!: Skybox;\n  shadowGenerator?: BABYLON.ShadowGenerator;\n  input?: Input;\n  currentInputs: IInputMap = {};\n  mode?: Soccer;\n  emitter = new Subject<{ event: string; args: any}>()\n  currentState = new BehaviorSubject<string>('title-screen')\n  selfId?: string;\n\n  constructor(public engine: BABYLON.Engine, public options: IGameOptions = {}) {\n    this.engine = engine\n    this.scene = new BABYLON.Scene(this.engine)\n    this.camera = new BABYLON.ArcRotateCamera('main', -Math.PI / 2, 1, 200, new BABYLON.Vector3(0, 1, 0), this.scene)\n    this.camera.fov = 0.7\n    if (options.canvas) {\n      this.canvas = options.canvas\n      this.camera.attachControl(this.canvas)\n      this.skybox = new Skybox(this)\n    }\n    else this.server = true\n    this.options = options\n    this.input = new Input(this)\n\n    this.engine.runRenderLoop(() => {\n      this.scene.render();\n    });\n  }\n\n\n  async init() {\n    const ammo = await Ammo()\n    this.scene.enablePhysics(new BABYLON.Vector3(0, -40, 0), new BABYLON.AmmoJSPlugin(true, ammo))\n\n    // this.setMode('Soccer')\n    // if(this.mode) {\n    //   this.mode.players = [ new SoccerPlayer(this, this.mode!, 0)]\n    //   this.mode.players[0].setId('SELF')\n    // }\n    \n  }\n\n  setMode(mode: string) {\n    console.log('INIT ' + mode)\n    if (mode === 'Soccer') this.mode = new Soccer(this)\n    if (this.mode) this.mode.init()\n  }\n}\n","export interface IGameState {\n    ball: {\n        position: BABYLON.Vector3;\n        rotation: BABYLON.Vector3;\n        angularVelocity: BABYLON.Vector3;\n        linearVelocity: BABYLON.Vector3;\n    }\n    players: IPlayerState[],\n    teams: {\n        id: number;\n        score: number;\n    }[],\n    timer: string;\n    delta: number;\n    state: string;\n}\n\nexport interface IPlayerState {\n    id: string;\n    teamId: number;\n    name: string;\n    position?: BABYLON.Vector3;\n    velocity?: BABYLON.Vector3;\n    ping?: number;\n}\n\nexport interface IGameOptions {\n    canvas?: HTMLCanvasElement,\n}\n\nexport interface IGameMode {\n    name: 'Soccer' | 'Beach Volley' | 'Practice' | 'Title Screen' | 'Playground';\n    fieldWidth?: number;\n    fieldHeight?: number;\n    time?: number; //seconds\n}\n\nexport interface IGInfo {\n    gameMode: IGameMode,\n    playerId: string;\n}\n\nexport interface IInputMap {\n    [key: string]: number;\n}\n\nexport interface IQueueState {\n    position: number;\n    inQueue: number;\n    gameModes: number[];\n    inQueue1v1: number;\n    inQueue2v2: number;\n    inQueue3v3: number;\n}","import * as BABYLON from 'babylonjs';\nimport { IInputMap, Game } from \"@winter-sports/game-lib\";\nimport { convolutionPixelShader } from 'babylonjs/Shaders/convolution.fragment';\n\nexport class Input {\n    game: Game;\n\n    gamepadManager: BABYLON.GamepadManager;\n    keys: Record<string, string[]> = {\n        UP: ['Z', 'STICK_UP'],\n        DOWN: ['S', 'STICK_DOWN'],\n        RIGHT: ['D', 'STICK_RIGHT'],\n        LEFT: ['Q', 'STICK_LEFT'],\n        LEFT_TRIGGER: ['LEFT_TRIGGER'],\n        RIGHT_TRIGGER: ['SHIFT', 'RIGHT_TRIGGER'],\n        A: ['PAD_A', 'PAD_Cross'],\n        B: ['LMB', 'PAD_B', 'PAD_Circle'],\n        X: ['PAD_X', 'PAD_Square'],\n        Y: ['PAD_Y', 'PAD_Triangle'],\n        RB: ['PAD_RB', 'PAD_L1'],\n        LB: ['PAD_LB', 'PAD_R1'],\n    }\n\n    inputs: Record<string, number> = {}\n\n    constructor(game: Game) {\n        this.game = game;\n        this.game.scene.actionManager = \n        new BABYLON.ActionManager(this.game.scene);\n\n        const am = this.game.scene.actionManager;\n        this.gamepadManager = new BABYLON.GamepadManager()\n\n        am.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnKeyDownTrigger, (evt) => {\n            this.inputs[evt.sourceEvent.key.toUpperCase()] = evt.sourceEvent.type == \"keydown\" ? 1 : 0;\n        }));\n        am.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnKeyUpTrigger, (evt) => {\n            this.inputs[evt.sourceEvent.key.toUpperCase()] = evt.sourceEvent.type == \"keydown\" ? 1 : 0;\n        }));\n \n        this.game.scene.onPointerObservable.add((event) => {\n            if(event.type === BABYLON.PointerEventTypes.POINTERDOWN) {\n                if(event.event.button === 0) this.inputs['LMB'] = 1\n                else if(event.event.button === 2) this.inputs['RMB'] = 1\n                else if(event.event.button === 1) this.inputs['MMB'] = 1\n            }\n            else if(event.type === BABYLON.PointerEventTypes.POINTERUP) {\n                if(event.event.button === 0) this.inputs['LMB'] = 0\n                else if(event.event.button === 2) this.inputs['RMB'] = 0\n                else if(event.event.button === 1) this.inputs['MMB'] = 0\n            }\n        })\n\n\n        this.gamepadManager.onGamepadConnectedObservable.add((gamepad, state) => {\n            gamepad.onleftstickchanged((values) => {\n                this.inputs['STICK_UP'] = 0\n                this.inputs['STICK_DOWN'] = 0\n                this.inputs['STICK_RIGHT'] = 0\n                this.inputs['STICK_LEFT'] = 0\n                if (Math.abs(values.y) > 0.1) {\n                    if (values.y < 0) this.inputs['STICK_UP'] = Math.abs(values.y)\n                    else this.inputs['STICK_DOWN'] = Math.abs(values.y)\n                }\n                if (Math.abs(values.x) > 0.1) {\n                    if (values.x < 0) this.inputs['STICK_LEFT'] = Math.abs(values.x)\n                    else this.inputs['STICK_RIGHT'] = Math.abs(values.x)\n                }\n            });\n\n            if(gamepad instanceof BABYLON.Xbox360Pad) {\n                gamepad.onlefttriggerchanged((value) => {\n                    if(value > 0.1) this.inputs['LEFT_TRIGGER'] = 1\n                    else this.inputs['LEFT_TRIGGER'] = 0\n                });\n    \n                gamepad.onrighttriggerchanged((value) => {\n                    if(value > 0.1) this.inputs['RIGHT_TRIGGER'] = 1\n                    else this.inputs['RIGHT_TRIGGER'] = 0\n                })\n\n                gamepad.onButtonDownObservable.add((button: any)=>{\n                    this.inputs[`PAD_${BABYLON.Xbox360Button[button]}`] = 1;\n                });\n\n                gamepad.onButtonUpObservable.add((button: any)=>{\n                    this.inputs[`PAD_${BABYLON.Xbox360Button[button]}`] = 0;\n                });\n\n            }\n\n            if (gamepad instanceof BABYLON.DualShockPad) {\n                gamepad.onButtonDownObservable.add((button, state)=>{\n                    console.log(button, \"PS4\", BABYLON.DualShockButton[button])\n                    this.inputs[`PAD_${BABYLON.DualShockButton[button]}`] = 1;\n                })\n                gamepad.onButtonUpObservable.add((button, state)=>{\n                    this.inputs[`PAD_${BABYLON.DualShockButton[button]}`] = 0;\n                })\n\n                gamepad.onlefttriggerchanged((value) => {\n                    if(value > 0.1) this.inputs['LEFT_TRIGGER'] = 1\n                    else this.inputs['LEFT_TRIGGER'] = 0\n                });\n    \n                gamepad.onrighttriggerchanged((value) => {\n                    if(value > 0.1) this.inputs['RIGHT_TRIGGER'] = 1\n                    else this.inputs['RIGHT_TRIGGER'] = 0\n                })\n            }\n        })\n    }\n\n    getInputs() {\n        const i: IInputMap = {}\n        for(let [key, value] of Object.entries(this.inputs)) {\n            if(value > 0)  {\n                const actionName = this.getActionName(key)\n                if(actionName) i[actionName] = value\n            }\n        }\n        return i\n    }\n\n    getActionName(key: string) {\n        for(let [action, keys] of Object.entries(this.keys)) {\n            if(keys.includes(key)) return action\n        }\n        return false\n    }\n}","import * as BABYLON from 'babylonjs'\nimport { Mesh } from \"babylonjs/Meshes/mesh\";\nimport { Game } from \"../../game-lib\";\nimport gsap from 'gsap';\n\nexport class Skybox {\n    skyboxDay!: Mesh;\n    skyboxNight!: Mesh;\n    hemisphericLight!: BABYLON.HemisphericLight;\n    light!: BABYLON.DirectionalLight\n    time: number = 12;\n    shadowGenerator!: BABYLON.ShadowGenerator;\n\n    constructor(private game: Game) { \n        this.generateLight()\n        this.generateSkybox()\n        this.shadowGenerator = new BABYLON.ShadowGenerator(1024, this.light)\n        this.shadowGenerator.useBlurExponentialShadowMap = true\n        this.shadowGenerator.blurScale = 2\n        this.shadowGenerator.darkness = 0.5\n        this.game.scene.registerBeforeRender(() => {\n            // this.time += 0.0016\n        })\n    }\n\n    generateLight() {\n        this.hemisphericLight = new BABYLON.HemisphericLight(\"light\", new BABYLON.Vector3(0, 2, 0), this.game.scene);\n        this.hemisphericLight.intensity = 0.7\n    \n        this.light = new BABYLON.DirectionalLight(\"light\", new BABYLON.Vector3(-1, -2, -1), this.game.scene);\n        this.light.intensity = 1\n        this.light.position = new BABYLON.Vector3(20, 40, 20);\n    }\n\n    generateSkybox() {\n        const dayMaterial = new BABYLON.StandardMaterial(\"skyBox\", this.game.scene);\n        dayMaterial.backFaceCulling = false;\n        dayMaterial.reflectionTexture = new BABYLON.CubeTexture(\"assets/skybox/sunny\", this.game.scene);\n        dayMaterial.reflectionTexture.coordinatesMode = BABYLON.Texture.SKYBOX_MODE;\n        dayMaterial.diffuseColor = new BABYLON.Color3(0, 0, 0);\n        dayMaterial.specularColor = new BABYLON.Color3(0, 0, 0);\n\n        const nightMaterial = new BABYLON.StandardMaterial(\"skyBox\", this.game.scene);\n        nightMaterial.backFaceCulling = false;\n        nightMaterial.reflectionTexture = new BABYLON.CubeTexture(\"assets/skybox/night\", this.game.scene);\n        nightMaterial.reflectionTexture.coordinatesMode = BABYLON.Texture.SKYBOX_MODE;\n        nightMaterial.diffuseColor = new BABYLON.Color3(0, 0, 0);\n        nightMaterial.specularColor = new BABYLON.Color3(0, 0, 0);\n\n        this.skyboxDay = BABYLON.MeshBuilder.CreateBox(\"skyBox\", { size: 1080 }, this.game.scene);\n        this.skyboxNight = BABYLON.MeshBuilder.CreateBox(\"skyBox\", { size: 1050 }, this.game.scene);\n\n        this.skyboxDay.material = dayMaterial;\n        this.skyboxNight.material = nightMaterial;\n\n        this.skyboxDay.visibility = 0.5\n        this.skyboxNight.visibility = 0\n\n        this.game.scene.registerBeforeRender(this.timeCycle.bind(this))\n    }\n\n    timeCycle() {\n        if (this.time >= 24) this.time = 0\n\n        const dayVisibility = gsap.utils.pipe(\n            gsap.utils.mapRange(0, 24, 0, 1),\n            gsap.utils.interpolate([0, 1, 0])\n        )\n\n        const nightVisibility = gsap.utils.pipe(\n            gsap.utils.mapRange(0, 24, 0, 1),\n            gsap.utils.interpolate([1, 0, 1])\n        )\n\n        const lightIntensity = gsap.utils.pipe(\n            gsap.utils.mapRange(0, 24, 0, 1),\n            gsap.utils.interpolate([0.2, 0.8, 0.2])\n        )\n\n        const hemisphericLightIntensity = gsap.utils.pipe(\n            gsap.utils.mapRange(0, 24, 0, 1),\n            gsap.utils.interpolate([0.1, 0.5, 0.1])\n        )\n\n        const color = gsap.utils.pipe(\n            gsap.utils.mapRange(0, 24, 0, 1),\n            gsap.utils.interpolate(['#2222ff',  '#ffffff', '#2222ff'])\n        )\n\n        const rotation = gsap.utils.pipe(\n            gsap.utils.mapRange(0, 24, 0, Math.PI * 2)\n        )\n\n        this.skyboxDay!.visibility = dayVisibility(this.time)\n        this.skyboxNight!.visibility = nightVisibility(this.time)\n        this.light.intensity = lightIntensity(this.time)\n        this.hemisphericLight.intensity = hemisphericLightIntensity(this.time)\n        this.skyboxDay!.rotation.y = rotation(this.time)\n        this.skyboxNight!.rotation.y = -rotation(this.time)\n        const c = gsap.utils.splitColor(color(this.time))\n        this.hemisphericLight.diffuse = new BABYLON.Color3(\n            gsap.utils.mapRange(0, 255, 0, 1, c[0]),\n            gsap.utils.mapRange(0, 255, 0, 1, c[1]),\n            gsap.utils.mapRange(0, 255, 0, 1, c[2])\n        )\n    }\n}","import { Game } from '@winter-sports/game-lib';\nimport * as BABYLON from 'babylonjs';\n\nexport class SmoothAnimation {\n\n    weightAnimations: { weight: number; animation: BABYLON.AnimationGroup }[] = []\n    currentAnimation: string = '';\n\n    constructor(private game: Game, private animations: BABYLON.AnimationGroup[]) {\n        this.weightAnimations = this.animations.map(anim => ({ weight: 0, animation: anim }))\n        for(let wa of this.weightAnimations) {\n            wa.animation.start(true)\n            wa.animation.setWeightForAllAnimatables(0)\n            if(wa.animation.name === 'Idle') { \n                wa.animation.setWeightForAllAnimatables(1)\n                wa.weight = 1\n            }\n            else {\n                wa.animation.setWeightForAllAnimatables(0)\n                wa.weight = 0\n            }\n        }\n    }\n\n    loop() {\n        for(let wa of this.weightAnimations) {\n            if(wa.animation.name.toLocaleUpperCase() === this.currentAnimation) {\n                wa.weight = BABYLON.Scalar.Clamp(wa.weight + 0.05, 0, 1);\n            }\n            else {\n                wa.weight = BABYLON.Scalar.Clamp(wa.weight - 0.05, 0, 1);\n            }\n            wa.animation.setWeightForAllAnimatables(wa.weight)\n        }\n    }\n\n    play(name: string, speed?: number) {\n        this.currentAnimation = name\n        if(speed) {\n            const wa = this.weightAnimations.find(a => a.animation.name.toLocaleUpperCase() === name)\n            if(wa) wa.animation.speedRatio = speed\n        }\n    }\n\n}","import * as BABYLON from 'babylonjs';\n\nexport function setUVScale(mesh: BABYLON.Mesh, uScale: number, vScale: number) {\n    var i,\n        UVs = mesh.getVerticesData(BABYLON.VertexBuffer.UVKind),\n        len = UVs!.length || 0;\n\n    if (uScale !== 1) {\n        for (i = 0; i < len; i += 2) {\n            UVs![i] *= uScale;\n        }\n    }\n    if (vScale !== 1) {\n        for (i = 1; i < len; i += 2) {\n            UVs![i] *= vScale;\n        }\n    }\n\n    mesh.setVerticesData(BABYLON.VertexBuffer.UVKind, UVs || []);\n}\n","import { Game, Soccer } from \"@winter-sports/game-lib\";\nimport * as BABYLON from 'babylonjs';\n\nexport class SoccerBall {\n    mesh: BABYLON.Mesh;\n    maxSpeed = 140\n    constructor(private game: Game, private mode: Soccer) {\n        this.mesh = BABYLON.MeshBuilder.CreateSphere('ball', { diameter: 2 })\n        this.mesh.physicsImpostor = new BABYLON.PhysicsImpostor(this.mesh,\n            BABYLON.PhysicsImpostor.SphereImpostor, { mass: 5, restitution: 0.5 }\n        )\n        // if(this.game.canvas) this.mesh.physicsImpostor.mass = 0\n        this.mesh.position.y = 10\n\n        if(this.game.canvas) this.game.skybox.shadowGenerator.addShadowCaster(this.mesh)\n\n        const ballMaterial = new BABYLON.StandardMaterial(\"ball\", this.game.scene);\n        const texture = new BABYLON.Texture(\"assets/textures/amiga.jpg\", this.game.scene);\n        ballMaterial.ambientTexture = texture\n        this.mesh.material = ballMaterial\n\n        const trail = new BABYLON.TrailMesh('ball-trail', this.mesh, this.game.scene, 0.5)\n        const sourceMat = new BABYLON.StandardMaterial('sourceMat', this.game.scene);\n        sourceMat.diffuseColor = new BABYLON.Color3(1, 1, 1);\n        sourceMat.specularColor = BABYLON.Color3.White();\n        sourceMat.alpha = 0.2\n        trail.material = sourceMat;\n    }\n\n    update() {\n        if(this.mesh.physicsImpostor) {\n            this.mesh.physicsImpostor!.setLinearVelocity(this.mesh.physicsImpostor!.getLinearVelocity()!.scale(0.995))\n            this.mesh.physicsImpostor!.setAngularVelocity(this.mesh.physicsImpostor!.getAngularVelocity()!.scale(0.995))\n\n            if(this.mesh.physicsImpostor.getLinearVelocity()!.length() > this.maxSpeed) {\n                this.mesh.physicsImpostor.setLinearVelocity(\n                    this.mesh.physicsImpostor.getLinearVelocity()!.normalize().scale(this.maxSpeed)\n                )\n            }\n        }\n\n        //\n        \n    }\n\n    getState() {\n        const linear = this.mesh.physicsImpostor?.getLinearVelocity()\n        const angular = this.mesh.physicsImpostor?.getAngularVelocity()\n        return {\n            position: {\n                x: this.mesh.position.x,\n                y: this.mesh.position.y,\n                z: this.mesh.position.z,\n            },\n            linearVelocity: {\n                x: linear?.x,\n                y: linear?.y,\n                z: linear?.z,\n            },\n            angularVelocity: {\n                x: angular?.x,\n                y: angular?.y,\n                z: angular?.z,\n            }\n        }\n    }\n\n    setState(ballState: any) {\n        this.mesh.position.x = ballState.position.x;\n        this.mesh.position.y = ballState.position.y;\n        this.mesh.position.z = ballState.position.z;\n        this.mesh.physicsImpostor?.setAngularVelocity(\n            new BABYLON.Vector3(ballState.angularVelocity.x, ballState.angularVelocity.y, ballState.angularVelocity.z)\n        )\n        this.mesh.physicsImpostor?.setLinearVelocity(\n            new BABYLON.Vector3(ballState.linearVelocity.x, ballState.linearVelocity.y, ballState.linearVelocity.z)\n        )\n    }\n\n    destroy() {\n        this.mesh.dispose()\n    }\n}","import { Game, Soccer } from '@winter-sports/game-lib';\nimport { BasePlayer } from '../../player/player';\nimport * as BABYLON from 'babylonjs'\n\nexport class SoccerPlayer extends BasePlayer {\n    constructor(private g: Game, private mode: Soccer, public teamId: number) {\n        super(g)\n        if (this.renderer) this.renderer!.lookAt = this.mode.ball.mesh\n\n    }\n\n    loop() {\n        if (this.mode.fsm.state.kickoff) {\n            this.g.input!.inputs = {}\n        }\n        super.loop()\n    }\n\n    getState() {\n        return {\n            id: this.id,\n            pseudo: this.pseudo || 'Anon',\n            position: {\n                x: this.collider.position.x,\n                y: this.collider.position.y,\n                z: this.collider.position.z,\n            },\n            velocity: {\n                x: this.velocity.x,\n                y: this.velocity.y,\n                z: this.velocity.z,\n            },\n            action: 'NONE' //TODO: Yelling, calling ...\n        }\n    }\n\n    setState(playerState: any) {\n        this.collider.position.x = playerState.position.x\n        this.collider.position.y = playerState.position.y\n        this.collider.position.z = playerState.position.z\n    }\n}","import { Game } from '../../../game-lib';\nimport { BasePlayer } from '../../player/player';\nimport { SoccerBall } from './ball';\nimport { SoccerPlayer } from './player';\nimport { SoccerWorld } from './world';\nimport * as BABYLON from 'babylonjs';\nimport { SoccerFSM } from './soccerFSM';\nimport { SoccerUI } from './soccerUI';\nimport { PlayerSocket } from './../../../../../../../apps/api/src/types/player-socket.interface';\n\nexport class Soccer {\n    world!: SoccerWorld\n    ball!: SoccerBall;\n    players: SoccerPlayer[] = [];\n    fsm!: SoccerFSM;\n    ui!: SoccerUI;\n    loopCall = this.loop.bind(this)\n    serverLoop = this.server.bind(this)\n    constructor(private game: Game) {}\n\n    init() {\n        this.world = new SoccerWorld(this.game, this)\n        this.ball = new SoccerBall(this.game, this)\n        this.players = []\n        this.fsm = new SoccerFSM(this.game, this)\n        this.ui = new SoccerUI(this.game, this)\n        this.game.scene.registerBeforeRender(this.loopCall)\n        if(!this.game.canvas) {\n            this.game.scene.registerBeforeRender(this.serverLoop)\n            this.game.emitter.next({ event: 'gInfo', args: this.gInfo() })\n            //TODO: Think about a way to send gInfo to newcomers\n        }\n        this.game.currentState.next('Soccer')\n    }\n\n    server() {\n        this.game.emitter.next({ event: 'g', args: this.getState()})\n    }\n\n    gInfo() {\n        return {\n            gameMode: \"Soccer\",\n        }\n    }\n    \n    getState() {\n        return {\n            ball: this.ball.getState(),\n            players: this.players.map(p => p.getState()),\n            ...this.fsm.getState()\n        }\n    }\n\n    setState(state: any) {\n        this.ball.setState(state.ball);\n        this.setPlayerState(state.players)\n        this.fsm.setState(state);\n    }\n\n    setPlayerState(players: any[]) {\n        for(let player of players) {\n            let currentPlayer = this.players.find(p => p.id === player.id)\n            if(!currentPlayer) {\n                console.debug()\n                currentPlayer = new SoccerPlayer(this.game, this, 0)\n                currentPlayer.setId(player.id)\n                currentPlayer.setPseudo(player.pseudo)\n                this.players.push(currentPlayer)\n            }\n            currentPlayer.setState(player)\n        }\n    }\n\n    kickOffPosition() {\n        const place = (team: number, index: number) => {\n            return new BABYLON.Vector3(\n                ((team ? -1 : 1) * this.world.settings.width / 3) * ((index === 0) ? 0.5 : 1),\n                3,\n                (index === 0) ? 0 : (index === 1) ? this.world.settings.depth / 4 : - this.world.settings.depth / 4\n            )\n        }\n        this.ball.mesh.position = new BABYLON.Vector3(0, 2, 0)\n        this.ball.mesh.physicsImpostor?.setAngularVelocity(BABYLON.Vector3.Zero())\n        this.ball.mesh.physicsImpostor?.setLinearVelocity(BABYLON.Vector3.Zero())\n        this.players.filter(p => p.teamId === 0).map((p, i) => {\n            p.collider.position = place(p.teamId, i)\n            p.collider.lookAt(this.ball.mesh.position, Math.PI, 0, 0, BABYLON.Space.WORLD)\n        })\n        this.players.filter(p => p.teamId === 1).map((p, i) => {\n            p.collider.position = place(p.teamId, i)\n            p.collider.lookAt(this.ball.mesh.position, Math.PI, 0, 0, BABYLON.Space.WORLD)\n        })\n    }\n\n    gameOver() {\n        const overCamera = new BABYLON.FreeCamera('game_over_camera', new BABYLON.Vector3(0, 5, 25), this.game.scene)\n        overCamera.target = BABYLON.Vector3.Zero()\n\n        const spacing = 6;\n        const winnerTeam = this.fsm.state.score[0] >= this.fsm.state.score[1] ? 0 : 1\n        const winners = this.players.filter(p => p.teamId === winnerTeam)\n        const losers = this.players.filter(p => p.teamId !== winnerTeam)\n\n        losers.map((p) => p.destroy())\n        const startAt = -((winners.length+1) / 2) *spacing\n        winners.map((p, i) => {\n            p.collider.position = new BABYLON.Vector3(startAt + (i+1) * spacing, 5, 0)\n            console.log('lookAt over')\n            p.collider.lookAt(overCamera.position, Math.PI, 0, 0, BABYLON.Space.WORLD)\n            if(p.renderer) p.renderer.lookAt = overCamera\n        })\n\n        this.ball.mesh.position = new BABYLON.Vector3(0, 20, 8)\n\n        this.game.scene.switchActiveCamera(overCamera)\n\n    }\n\n    loop() {\n        this.ball.update()\n        this.fsm.transition()\n        this.ui.update()\n    }\n\n    destroy() {\n        this.game.scene.unregisterBeforeRender(this.loopCall)\n        this.world.destroy()\n        this.ball.destroy()\n        for(let player of this.players) player.destroy()\n    }\n\n    addPlayers(players: PlayerSocket[]) {\n        for(let player of players) {\n            const p = new SoccerPlayer(this.game, this, 0)\n            p.id = player.id\n            p.pseudo = player.pseudo || 'John'\n            this.players.push(p)\n        }\n    }\n\n\n}","import { Game, Soccer } from '@winter-sports/game-lib';\nimport dayjs from 'dayjs';\nexport class SoccerFSM {\n    currentState: string = 'UNKNOWN'\n    state = {\n        started: false,\n        celebration: false,\n        kickoff: false,\n        end: dayjs().add(5, 'minutes'),\n        score: [0, 0]\n    }\n\n    constructor(private game: Game, private mode: Soccer) { }\n\n    transition() {\n        this.checkState('UNKNOWN', 'WAITING_FOR_PLAYERS', () => true)\n        this.checkState('WAITING_FOR_PLAYERS', 'KICKOFF', this.isPlayerReady.bind(this))\n        this.checkState('KICKOFF', 'GAMEPLAY', this.isKickoffDone.bind(this))\n        this.checkState('GAMEPLAY', 'GOAL_CELEBRATION', this.isGoalScored.bind(this))\n        this.checkState('GOAL_CELEBRATION', 'KICKOFF', this.isCelebrationOver.bind(this))\n        this.checkState('GAMEPLAY', 'BALL_OUT', this.isBallOut.bind(this))\n        this.checkState('BALL_OUT', 'KICKOFF', () => true)\n        this.checkState('GAMEPLAY', 'GAME_OVER', this.isTimeOver.bind(this))\n        this.checkState('GAME_OVER', 'GAME_DESTROY', this.isTimeOver.bind(this))\n    }\n\n\n    changeState(to: string) {\n        console.debug(`${this.currentState} >>> ${to}`)\n        this.currentState = to\n\n        switch (to) {\n            case 'KICKOFF':\n                console.log(this.state.score)\n                this.state.kickoff = true\n                setTimeout(() => this.state.kickoff = false, 3000)\n                this.mode.kickOffPosition()\n                break;\n            case 'GOAL_CELEBRATION':\n                console.log(this.state.score)\n                this.state.celebration = true\n                setTimeout(() => this.state.celebration = false, 3000)\n                break;\n            case 'GAME_OVER':\n                this.state.end = dayjs().add(5, 'minutes')\n                this.mode.gameOver()\n                break;\n            case 'GAME_DESTROY':\n                this.mode.destroy()\n\n        }\n    }\n\n    checkState(from: string, to: string, condition: Function) {\n        if (from === this.currentState && condition()) this.changeState(to)\n    }\n\n    isPlayerReady() {\n        return true\n    }\n\n    isKickoffDone() {\n        return this.state.kickoff === false\n    }\n\n    isTimeOver() {\n        return this.state.end <= dayjs()\n    }\n\n    isCelebrationOver() {\n        return this.state.celebration === false\n    }\n\n    isGoalScored() {\n        let isScored = false\n        if (this.mode.world.blueGoalZone.intersectsMesh(this.mode.ball.mesh)) {\n            this.state.score[0] += 1;\n            isScored = true\n        }\n        else if (this.mode.world.redGoalZone.intersectsMesh(this.mode.ball.mesh)) {\n            this.state.score[1] += 1;\n            isScored = true\n        }\n        return isScored\n    }\n\n    isBallOut() {\n        if (Math.abs(this.mode.ball.mesh.position.z) > this.mode.world.settings.depth / 2 + 10) return true\n        if (Math.abs(this.mode.ball.mesh.position.x) > this.mode.world.settings.width / 2 + 10) return true\n        return false\n    }\n\n    getState() {\n        return {\n            currentState: this.currentState,\n            state: this.state\n        }\n    }\n\n    setState(state: any) {\n        state.state.end = dayjs(state.state.end)\n        this.state = state.state\n        if(this.currentState !== state.currentState) this.changeState(state.currentState)\n    }\n}","import { Game } from \"@winter-sports/game-lib\";\nimport { Soccer } from \"./soccer\";\nimport { BehaviorSubject, map } from 'rxjs';\nimport dayjs, { Dayjs } from \"dayjs\";\n\nexport class SoccerUI {\n    scoreRed: BehaviorSubject<number>;\n    scoreBlue: BehaviorSubject<number>;\n    currentState: BehaviorSubject<string>;\n    end: BehaviorSubject<Dayjs>;\n    timeLeft: BehaviorSubject<number>;\n\n    constructor(private game: Game, private mode: Soccer) {\n        this.scoreRed = new BehaviorSubject<number>(mode.fsm.state.score[0])\n        this.scoreBlue = new BehaviorSubject<number>(mode.fsm.state.score[1])\n        this.currentState = new BehaviorSubject<string>(mode.fsm.currentState)\n        this.end = new BehaviorSubject<Dayjs>(mode.fsm.state.end)\n        this.timeLeft = new BehaviorSubject<number>(Math.floor(mode.fsm.state.end.diff(dayjs()) / 1000))\n        console.log(this.timeLeft.value)\n    }\n\n    update() {\n        this.updateItem(this.scoreRed, this.mode.fsm.state.score[0])\n        this.updateItem(this.scoreBlue, this.mode.fsm.state.score[1])\n        this.updateItem(this.currentState, this.mode.fsm.currentState)\n        this.updateItem(this.end, this.mode.fsm.state.end)\n        this.updateItem(this.timeLeft, Math.floor(this.mode.fsm.state.end.diff(dayjs()) / 1000))\n    }\n\n    updateItem(subject: BehaviorSubject<any>, value: any) {\n        subject.next(value)\n    }\n}","import { Game } from '@winter-sports/game-lib';\nimport { Soccer } from './soccer';\nimport * as BABYLON from 'babylonjs'\nimport gsap from 'gsap'\nimport { setUVScale } from '../../misc/uv';\n\nexport class SoccerWorld {\n    field: BABYLON.Mesh;\n    under: BABYLON.Mesh;\n    lines: BABYLON.Mesh[] = []\n    borders: BABYLON.Mesh[] = []\n    lights: BABYLON.Light[] = []\n    redGoal: BABYLON.Mesh[] = []\n    blueGoal: BABYLON.Mesh[] = []\n    redGoalZone!: BABYLON.Mesh;\n    blueGoalZone!: BABYLON.Mesh;\n\n    settings = {\n        width: 250, depth: 140, thickness: 1, borderHeight: 5,\n        borderTickness: 0.5, goalWidth: 40, goalHeight: 15, underOffset: 15,\n        goalDepth: 20\n    }\n\n    destroy() {\n        this.field.dispose()\n        this.under.dispose()\n        this.redGoalZone.dispose()\n        this.blueGoalZone.dispose()\n        for(let item of this.lines) item.dispose()\n        for(let item of this.borders) item.dispose()\n        for(let item of this.lights) item.dispose()\n        for(let item of this.redGoal) item.dispose()\n        for(let item of this.blueGoal) item.dispose()\n    }\n\n    constructor(private game: Game, private soccer: Soccer) {\n        this.field = this.createField()\n        this.under = this.createUnder()\n        this.borders = this.createBorders()\n        this.createGoals()\n\n        if (this.game.canvas) {\n            this.lines = this.createLines()\n            this.lights = this.createLights()\n            this.applyTextures()\n            this.enableShadows()\n        }\n\n    }\n\n    enableShadows() {\n        for (let mesh of this.redGoal) this.game.skybox.shadowGenerator.addShadowCaster(mesh)\n        for (let mesh of this.blueGoal) this.game.skybox.shadowGenerator.addShadowCaster(mesh)\n    }\n\n    createField() {\n        const field = BABYLON.MeshBuilder.CreateBox('field', { width: this.settings.width, height: 1, depth: this.settings.depth })\n        field.position.y = -0.51\n        field.physicsImpostor = new BABYLON.PhysicsImpostor(field,\n            BABYLON.PhysicsImpostor.BoxImpostor, { mass: 0, restitution: 1, friction: 10 }, this.game.scene);\n        field.checkCollisions = true\n        return field\n    }\n\n    createUnder() {\n        // const under = BABYLON.MeshBuilder.CreateDisc('under', { radius: this.settings.width })\n        const under = BABYLON.MeshBuilder.CreateBox('under', { width: this.settings.width + this.settings.goalDepth * 2, height: 0.5, depth: this.settings.goalWidth})\n        under.position.y = -0.51\n        under.physicsImpostor = new BABYLON.PhysicsImpostor(under,\n            BABYLON.PhysicsImpostor.BoxImpostor, { mass: 0, restitution: 1, friction: 10 }, this.game.scene);\n        under.checkCollisions = true\n        return under\n    }\n\n    createLines() {\n        const lines: BABYLON.Mesh[] = []\n        const { width, depth, thickness } = this.settings;\n        lines[0] = BABYLON.MeshBuilder.CreatePlane('line0', { width: thickness, height: depth })\n        lines[0].rotation = new BABYLON.Vector3(Math.PI / 2, Math.PI / 2, Math.PI / 2)\n        lines[0].setParent(this.field)\n\n        lines[1] = BABYLON.MeshBuilder.CreateLathe('circle', {\n            shape: [new BABYLON.Vector3(0.33, 0, 0), new BABYLON.Vector3(0.35, 0, 0)],\n            radius: depth / 2,\n            tessellation: 64\n        })\n        //TODO: Replace 0.33 with line thickness calculation\n        lines[1].rotation = new BABYLON.Vector3(-Math.PI / 2 * 2, -Math.PI / 2, 0)\n\n        lines[2] = BABYLON.MeshBuilder.CreatePlane('line1', { width: width, height: thickness })\n        lines[2].rotation = new BABYLON.Vector3(Math.PI / 2, Math.PI / 2, Math.PI / 2)\n        lines[2].position.z = depth / 2 - thickness / 2\n        lines[2].setParent(this.field)\n\n        lines[3] = BABYLON.MeshBuilder.CreatePlane('line2', { width: width, height: thickness })\n        lines[3].rotation = new BABYLON.Vector3(Math.PI / 2, Math.PI / 2, Math.PI / 2)\n        lines[3].position.z = -depth / 2 + thickness / 2\n        lines[3].setParent(this.field)\n\n        lines[4] = BABYLON.MeshBuilder.CreatePlane('line0', { width: thickness, height: depth })\n        lines[4].rotation = new BABYLON.Vector3(Math.PI / 2, Math.PI / 2, Math.PI / 2)\n        lines[4].position.x = -width / 2 + thickness / 2\n        lines[4].setParent(this.field)\n\n        lines[5] = BABYLON.MeshBuilder.CreatePlane('line0', { width: thickness, height: depth })\n        lines[5].rotation = new BABYLON.Vector3(Math.PI / 2, Math.PI / 2, Math.PI / 2)\n        lines[5].position.x = width / 2 - thickness / 2\n        lines[5].setParent(this.field)\n\n        lines[6] = BABYLON.MeshBuilder.CreateDisc('central_point', { radius: thickness })\n        lines[6].rotation = new BABYLON.Vector3(Math.PI / 2, 0, Math.PI / 2)\n        lines[6].setParent(this.field)\n        return lines\n    }\n\n    createBorders() {\n        const borders: BABYLON.Mesh[] = []\n        const physics = { mass: 0, restitution: 1.5 }\n        const { width, depth, borderHeight, borderTickness, goalWidth, goalHeight } = this.settings;\n        //SIDES\n        borders[0] = BABYLON.MeshBuilder.CreateBox('border1', { width: width, height: borderHeight, depth: borderTickness })\n        borders[0].position = new BABYLON.Vector3(0, borderHeight / 2, depth / 2 + borderTickness / 2)\n        borders[0].physicsImpostor = new BABYLON.PhysicsImpostor(\n            borders[0], BABYLON.PhysicsImpostor.BoxImpostor, physics\n        )\n        borders[0].checkCollisions = true\n\n        borders[1] = BABYLON.MeshBuilder.CreateBox('border1', { width: width, height: borderHeight, depth: borderTickness })\n        borders[1].position = new BABYLON.Vector3(0, borderHeight / 2, - depth / 2 - borderTickness / 2)\n        borders[1].rotation.z = Math.PI\n        borders[1].physicsImpostor = new BABYLON.PhysicsImpostor(\n            borders[1], BABYLON.PhysicsImpostor.BoxImpostor, physics\n        )\n        borders[1].checkCollisions = true\n\n        //GOAL EDGES\n        borders[2] = BABYLON.MeshBuilder.CreateBox('border2',\n            { width: (depth - goalWidth) / 2, height: borderHeight, depth: borderTickness }\n        )\n        borders[2].position = new BABYLON.Vector3(\n            - width / 2 - borderTickness / 2,\n            borderHeight / 2,\n            (- goalWidth / 2) - (depth - goalWidth) / 4\n        )\n        borders[2].rotation.y = Math.PI / 2\n        borders[2].rotation.z = Math.PI\n        borders[2].physicsImpostor = new BABYLON.PhysicsImpostor(\n            borders[2], BABYLON.PhysicsImpostor.BoxImpostor, physics\n        )\n        borders[2].checkCollisions = true\n\n        borders[3] = BABYLON.MeshBuilder.CreateBox('border2',\n            { width: (depth - goalWidth) / 2, height: borderHeight, depth: borderTickness }\n        )\n        borders[3].position = new BABYLON.Vector3(\n            - width / 2 - borderTickness / 2,\n            borderHeight / 2,\n            (goalWidth / 2) + (depth - goalWidth) / 4\n        )\n        borders[3].rotation.y = Math.PI / 2\n        borders[3].rotation.z = Math.PI\n        borders[3].physicsImpostor = new BABYLON.PhysicsImpostor(\n            borders[3], BABYLON.PhysicsImpostor.BoxImpostor, physics\n        )\n        borders[3].checkCollisions = true\n\n        borders[4] = BABYLON.MeshBuilder.CreateBox('border2',\n            { width: (depth - goalWidth) / 2, height: borderHeight, depth: borderTickness }\n        )\n        borders[4].position = new BABYLON.Vector3(\n            width / 2 + borderTickness / 2,\n            borderHeight / 2,\n            (goalWidth / 2) + (depth - goalWidth) / 4\n        )\n        borders[4].rotation.y = Math.PI / 2\n        borders[4].physicsImpostor = new BABYLON.PhysicsImpostor(\n            borders[4], BABYLON.PhysicsImpostor.BoxImpostor, physics\n        )\n        borders[4].checkCollisions = true\n\n        borders[5] = BABYLON.MeshBuilder.CreateBox('border2',\n            { width: (depth - goalWidth) / 2, height: borderHeight, depth: borderTickness }\n        )\n        borders[5].position = new BABYLON.Vector3(\n            width / 2 + borderTickness / 2,\n            borderHeight / 2,\n            (- goalWidth / 2) - (depth - goalWidth) / 4\n        )\n        borders[5].rotation.y = Math.PI / 2\n        borders[5].physicsImpostor = new BABYLON.PhysicsImpostor(\n            borders[5], BABYLON.PhysicsImpostor.BoxImpostor, physics\n        )\n        borders[5].checkCollisions = true\n\n        return borders\n    }\n\n    createGoals() {\n        const { goalHeight, goalWidth, width, goalDepth } = this.settings\n        const diameter = 1.5\n        const goalMaterial = new BABYLON.StandardMaterial('goal', this.game.scene)\n        goalMaterial.specularColor = new BABYLON.Color3(0, 0, 0)\n        goalMaterial.ambientColor = new BABYLON.Color3(0, 0, 0)\n\n        // goalMaterial.disableLighting = true\n        const genGoal = (direction: number) => {\n            const g: BABYLON.Mesh[] = []\n            g[0] = BABYLON.MeshBuilder.CreateCylinder(`goal${direction}`, { height: goalHeight + diameter, diameter: diameter, tessellation: 8 })\n            g[0].position = new BABYLON.Vector3(direction * width / 2, goalHeight / 2 - 1, goalWidth / 2)\n            g[0].physicsImpostor = new BABYLON.PhysicsImpostor(g[0], BABYLON.PhysicsImpostor.CylinderImpostor, { mass: 0 })\n            g[0].checkCollisions = true //POST\n\n            g[1] = BABYLON.MeshBuilder.CreateCylinder(`goal${direction}`, { height: goalHeight + diameter, diameter: diameter, tessellation: 8 })\n            g[1].position = new BABYLON.Vector3(direction * width / 2, goalHeight / 2 - 1, -goalWidth / 2)\n            g[1].physicsImpostor = new BABYLON.PhysicsImpostor(g[1], BABYLON.PhysicsImpostor.CylinderImpostor, { mass: 0 })\n            g[1].checkCollisions = true //POST\n\n            g[2] = BABYLON.MeshBuilder.CreateCylinder(`goal${direction}`, { height: goalWidth, diameter: diameter, tessellation: 8 })\n            g[2].position = new BABYLON.Vector3(direction * width / 2, goalHeight - 1, 0)\n            g[2].rotation.x = Math.PI / 2\n            g[2].checkCollisions = true //CROSSBAR\n\n            g[3] = BABYLON.MeshBuilder.CreateCylinder(`goal${direction}`, { height: goalHeight + diameter, diameter: diameter / 2, tessellation: 8 })\n            g[3].position = new BABYLON.Vector3(direction * width / 2 + direction * goalDepth, goalHeight / 2 - 1, -goalWidth / 2)\n\n            g[4] = BABYLON.MeshBuilder.CreateCylinder(`goal${direction}`, { height: goalHeight + diameter, diameter: diameter / 2, tessellation: 8 })\n            g[4].position = new BABYLON.Vector3(direction * width / 2 + direction * goalDepth, goalHeight / 2 - 1, goalWidth / 2)\n\n            g[5] = BABYLON.MeshBuilder.CreateCylinder(`goal${direction}`, { height: goalDepth, diameter: diameter / 2, tessellation: 8 })\n            g[5].position = new BABYLON.Vector3(direction * width / 2 + direction * goalDepth / 2, goalHeight - 0.7, goalWidth / 2)\n            g[5].rotation.z = Math.PI / 2\n\n            g[6] = BABYLON.MeshBuilder.CreateCylinder(`goal${direction}`, { height: goalDepth, diameter: diameter / 2, tessellation: 8 })\n            g[6].position = new BABYLON.Vector3(direction * width / 2 + direction * goalDepth / 2, goalHeight - 0.7, - goalWidth / 2)\n            g[6].rotation.z = Math.PI / 2\n\n            g[7] = BABYLON.MeshBuilder.CreateCylinder(`goal${direction}`, { height: goalWidth, diameter: diameter / 2, tessellation: 8 })\n            g[7].position = new BABYLON.Vector3(direction * width / 2 + direction * goalDepth, goalHeight - 0.7, 0)\n            g[7].rotation.x = Math.PI / 2\n            for(let mesh of g) mesh.material = goalMaterial\n\n            g[8] = BABYLON.MeshBuilder.CreateBox(`goal${direction}`, { height: goalHeight, width: goalWidth, depth: 0.5 })\n            g[8].position = new BABYLON.Vector3(direction * width / 2 + direction * goalDepth, goalHeight / 2, 0)\n            g[8].rotation.y = Math.PI / 2\n            g[8].checkCollisions = true\n            g[8].physicsImpostor = new BABYLON.PhysicsImpostor(g[8], BABYLON.PhysicsImpostor.BoxImpostor, { mass: 0, restitution: 0.5 })\n\n            g[9] = BABYLON.MeshBuilder.CreateBox(`goal${direction}`, { height: goalHeight, width: goalDepth, depth: 0.5 })\n            g[9].position = new BABYLON.Vector3(direction * width / 2 + direction * goalDepth / 2, goalHeight / 2, goalWidth / 2)\n            g[9].checkCollisions = true\n            g[9].physicsImpostor = new BABYLON.PhysicsImpostor(g[9], BABYLON.PhysicsImpostor.BoxImpostor, { mass: 0, restitution: 0.5 })\n\n            g[10] = BABYLON.MeshBuilder.CreateBox(`goal${direction}`, { height: goalHeight, width: goalDepth, depth: 0.5 })\n            g[10].position = new BABYLON.Vector3(direction * width / 2 + direction * goalDepth / 2, goalHeight / 2, - goalWidth / 2)\n            g[10].checkCollisions = true\n            g[10].physicsImpostor = new BABYLON.PhysicsImpostor(g[10], BABYLON.PhysicsImpostor.BoxImpostor, { mass: 0, restitution: 0.5 })\n\n            g[11] = BABYLON.MeshBuilder.CreateBox(`goal${direction}`, { height: goalDepth, width: goalWidth, depth: 0.5 })\n            g[11].position = new BABYLON.Vector3(direction * width / 2 + direction * goalDepth / 2, goalHeight - 0.7, 0)\n            g[11].rotation.y = Math.PI / 2\n            g[11].rotation.x = Math.PI / 2\n            g[11].checkCollisions = true\n            g[11].physicsImpostor = new BABYLON.PhysicsImpostor(g[11], BABYLON.PhysicsImpostor.BoxImpostor, { mass: 0, restitution: 0.5 })\n\n\n            return g\n        }\n\n        this.redGoal = genGoal(1)\n        this.blueGoal = genGoal(-1)\n\n\n        this.redGoalZone = BABYLON.MeshBuilder.CreateBox('redGoalZone', {\n            width: goalDepth, height: goalHeight - 3, depth: goalWidth - 3, sideOrientation: BABYLON.Mesh.BACKSIDE\n        })\n        this.redGoalZone.isVisible = false\n        this.redGoalZone.position = new BABYLON.Vector3(width / 2 + (goalDepth / 2 + 3), goalHeight / 2 - 1, 0)\n\n\n        this.blueGoalZone = BABYLON.MeshBuilder.CreateBox('blueGoalZone', {\n            width: goalDepth, height: goalHeight - 3, depth: goalWidth - 3, sideOrientation: BABYLON.Mesh.BACKSIDE\n        })\n        this.blueGoalZone.isVisible = false\n        this.blueGoalZone.position = new BABYLON.Vector3(-width / 2 - (goalDepth / 2 + 3), goalHeight / 2 - 1, 0)\n    }\n\n    createLights() {\n        const { width, depth } = this.settings\n        const lights: BABYLON.Light[] = []\n\n        const genLight = (p: BABYLON.Vector3) => {\n            const l = new BABYLON.PointLight('fLight', p, this.game.scene);\n            l.intensity = 0;\n            gsap.to(l, { intensity: 3, duration: 15, delay: lights.length * 0.5, })\n            return l;\n        }\n\n        lights[0] = genLight(new BABYLON.Vector3(width / 2, 5, depth / 2))\n        lights[1] = genLight(new BABYLON.Vector3(-width / 2, 5, depth / 2))\n        lights[2] = genLight(new BABYLON.Vector3(width / 2, 5, -depth / 2))\n        lights[3] = genLight(new BABYLON.Vector3(-width / 2, 5, -depth / 2))\n\n        return lights\n    }\n\n    applyTextures() {\n        //#region The pitch\n        const grass = new BABYLON.StandardMaterial(\"grass\", this.game.scene);\n        grass.specularColor = new BABYLON.Color3(0, 0, 0)\n        const t1 = new BABYLON.Texture(\"assets/textures/pitch2.png\", this.game.scene);\n        t1.uScale = 6\n        t1.vScale = 8\n        grass.ambientTexture = t1\n        grass.maxSimultaneousLights = 8\n        this.field.material = grass\n        this.field.receiveShadows = true\n        //#endregion\n\n        //#region Under the pitch\n        const under = new BABYLON.StandardMaterial(\"under\", this.game.scene);\n        under.specularColor = new BABYLON.Color3(0, 0, 0)\n        const t2 = new BABYLON.Texture(\"assets/textures/sand.jpg\", this.game.scene);\n        t2.uScale = 6\n        t2.vScale = 8\n        under.ambientTexture = t2\n        under.maxSimultaneousLights = 8\n        this.under.material = under\n        this.under.receiveShadows = true\n        //#endregion\n\n        //#region Borders\n        const material = new BABYLON.StandardMaterial(\"borders\", this.game.scene)\n        material.diffuseColor = new BABYLON.Color3(0.8, 0.8, 1)\n        material.alpha = 0.1\n\n        this.borders[5].material = material\n        this.borders[4].material = material\n        this.borders[3].material = material\n        this.borders[2].material = material\n        this.borders[1].material = material\n        this.borders[0].material = material\n        //#endregion\n\n        //#region Net material\n        const netMaterial = new BABYLON.StandardMaterial(\"net\", this.game.scene);\n        netMaterial.useAlphaFromDiffuseTexture = true\n        const texture = new BABYLON.Texture(\"assets/textures/borders.png\", this.game.scene);\n        texture.uScale = 1\n        texture.vScale = 3\n        texture.hasAlpha = true\n        netMaterial.diffuseTexture = texture\n        netMaterial.emissiveTexture = texture\n        netMaterial.alpha = 0.5\n        const setNetMaterial = (mesh: BABYLON.Mesh) => {\n            if(!mesh.material) { \n                const size = mesh.getBoundingInfo().boundingBox.extendSize\n                mesh.material = netMaterial\n                setUVScale(mesh, size.x / 4, size.y / 8)\n            }\n        }\n\n        for(let mesh of this.redGoal) setNetMaterial(mesh)\n        for(let mesh of this.blueGoal) setNetMaterial(mesh)\n        netMaterial.disableLighting = true\n        //#endregion\n    }\n\n}","import { BasePlayer } from \"./player\";\nimport * as BABYLON from 'babylonjs'\nimport { Game } from \"@winter-sports/game-lib\";\n\nexport class PlayerCamera {\n    camera: BABYLON.FreeCamera;\n    direction: BABYLON.Vector3;\n\n    camHeight = 10\n    camDistance = 80\n\n    constructor(private game: Game, private player: BasePlayer) {\n        this.camera = new BABYLON.FreeCamera('pCam', new BABYLON.Vector3(this.camDistance, this.camHeight, 0), this.game.scene)\n        this.camera.fov = 0.6\n        this.direction = new BABYLON.Vector3(0, 0, 0)\n    }\n\n    update(dt: number) {\n        // this.camera.target = this.player.collider.position\n        const targetPosition = this.player.collider.position.add(\n            new BABYLON.Vector3(this.camDistance, this.camHeight, 0)\n        )\n\n        this.camera.position = this.camera.position.add(new BABYLON.Vector3(\n            ((this.player.collider.position.x) + 80 - this.camera.position.x) * dt / 500,\n            ((this.player.collider.position.y) + 40 - this.camera.position.y) * dt / 500,\n            (this.player.collider.position.z - this.camera.position.z) * dt / 500,\n            )\n        )\n        this.camera.target = this.player.collider.position\n\n        this.direction = targetPosition.subtract(this.player.collider.position).multiplyByFloats(1, 0, 1).normalize()\n    }\n\n    destroy() {\n        this.camera.dispose()\n    }\n\n\n}","import { Game } from '@winter-sports/game-lib';\nimport { BasePlayer } from './player';\nimport * as BABYLON from 'babylonjs'\nimport * as GUI from 'babylonjs-gui'\n\nexport class PlayerNameplate {\n    advancedTexture?: GUI.AdvancedDynamicTexture;\n    nameplatePlane?: BABYLON.Mesh;\n    nameplate?: GUI.TextBlock;\n    constructor(private game: Game, private player: BasePlayer) {\n        this.nameplatePlane = BABYLON.MeshBuilder.CreatePlane('nameplate', { width: 10, height: 10 }, this.game.scene)\n        this.nameplatePlane.parent = this.player.collider\n        this.nameplatePlane.billboardMode = BABYLON.Mesh.BILLBOARDMODE_ALL;\n        this.nameplatePlane.locallyTranslate(new BABYLON.Vector3(0, 4, 0))\n        this.advancedTexture = GUI.AdvancedDynamicTexture.CreateForMesh(this.nameplatePlane)\n        this.nameplate = new GUI.TextBlock();\n        this.nameplate.text = 'Jabu';\n        this.nameplate.shadowBlur = 10\n        this.nameplate.fontSizeInPixels = 60;\n        this.nameplate.fontWeight = 'bold';\n        this.nameplate.color = '#ffffffff'\n        this.advancedTexture.addControl(this.nameplate);\n    }\n}","import { Game } from \"../../game-lib\";\nimport * as BABYLON from 'babylonjs';\nimport { PlayerRenderer } from \"./render\";\nimport { IInputMap } from \"../../interfaces\";\nimport { PlayerCamera } from \"./camera\";\nimport { PlayerNameplate } from './nameplate';\n\nexport class BasePlayer {\n    public id?: string;\n    public pseudo?: string;\n    public collider!: BABYLON.Mesh;\n    serverPosition?: BABYLON.Vector3;\n    renderer!: PlayerRenderer;\n    camera!: PlayerCamera;\n    inputs: IInputMap = {};\n    acceleration = new BABYLON.Vector3(0, 0, 0);\n    velocity = new BABYLON.Vector3(0, 0, 0);\n    gravityVelocity = new BABYLON.Vector3(0, 0, 0);\n    realGravityVelocity = new BABYLON.Vector3(0, 0, 0);\n    nameplate!: PlayerNameplate;\n    private deltaSpeed = 180\n    private sprintDeltaSpeed = 120\n    loopCall = this.loop.bind(this)\n\n    constructor(private game: Game) { this.init() }\n\n    destroy() {\n        this.game.scene.unregisterBeforeRender(this.loopCall)\n        this.collider?.dispose()\n        if (this.renderer) this.renderer.destroy()\n        this.camera.destroy()\n    }\n\n    init() {\n        this.collider = BABYLON.MeshBuilder.CreateBox('player_collider', { width: 2.5, height: 4, depth: 1.7 }, this.game.scene)\n        this.collider.ellipsoid = new BABYLON.Vector3(1, 2, 0.7);\n        this.collider.isVisible = false\n        this.collider.checkCollisions = true\n        this.collider.physicsImpostor = new BABYLON.PhysicsImpostor(this.collider, BABYLON.PhysicsImpostor.BoxImpostor,\n            { mass: 0, restitution: 2 })\n        if (this.game.canvas) {\n            this.game.skybox.shadowGenerator.addShadowCaster(this.collider)\n            this.renderer = new PlayerRenderer(this.game, this)\n            this.nameplate = new PlayerNameplate(this.game, this)\n        }\n        this.game.scene.registerBeforeRender(this.loopCall)\n        this.camera = new PlayerCamera(this.game, this)\n    }\n\n    loop() {\n        const dt = this.game.engine.getDeltaTime()\n\n        const initialPosition = this.collider.position.clone()\n\n        if (this.id === 'SELF' || this.id === this.game.selfId) { this.inputs = this.game.input?.getInputs() || {} }\n        const X = (this.inputs['UP'] || 0) * -1 + (this.inputs['DOWN'] || 0) * 1\n        const Z = (this.inputs['RIGHT'] || 0) * 1 + (this.inputs['LEFT'] || 0) * -1\n\n        this.acceleration = new BABYLON.Vector3(X, 0, Z)\n        if (this.acceleration.length() > 1) this.acceleration = this.acceleration.normalize()\n        if (this.inputs['RIGHT_TRIGGER']) this.acceleration = this.acceleration.scaleInPlace(dt / this.sprintDeltaSpeed)\n        else this.acceleration = this.acceleration.scaleInPlace(dt / this.deltaSpeed)\n\n        this.velocity = this.velocity.add(this.acceleration)\n\n\n        if (this.velocity.length() > 0.001) this.collider.lookAt(this.collider.position.subtract(this.velocity))\n\n        if (this.inputs['A'] && this.realGravityVelocity.y === 0) {\n            this.realGravityVelocity.y = 0.4\n        }\n        //GRAVITY\n        this.gravityVelocity = new BABYLON.Vector3(0, this.realGravityVelocity.y - 0.01, 0)\n        this.collider.moveWithCollisions(this.velocity)\n        this.collider.moveWithCollisions(this.gravityVelocity)\n\n        if(this.renderer) this.renderer.render(dt)\n        this.camera.update(dt)\n\n        this.realGravityVelocity = this.collider.position.subtract(initialPosition).maximizeInPlaceFromFloats(0, -2, 0).scaleInPlace(0.99)\n\n        this.velocity = this.velocity.scaleInPlace(0.85)\n        // this.gravityVelocity = this.gravityVelocity.scaleInPlace(0.80)\n        if(this.serverPosition) {\n            const distance = this.serverPosition.subtract(this.collider.position)\n            this.collider.position = this.collider.position.add(distance.scale(0.1))\n        }\n    }\n\n\n\n    setSelf() {\n        this.game.scene.switchActiveCamera(this.camera.camera)\n    }\n\n    setId(id: string) {\n        this.id = id\n        console.debug(this.id, this.game.selfId)\n        if (this.id === this.game.selfId || this.id === 'SELF') this.game.scene.switchActiveCamera(this.camera.camera)\n    }\n\n    setPseudo(pseudo: string) {\n        this.pseudo = pseudo\n    }\n\n}","import { Game } from \"@winter-sports/game-lib\";\nimport { BasePlayer } from \"./player\";\nimport * as BABYLON from 'babylonjs';\nimport 'babylonjs-loaders';\nimport { SmoothAnimation } from \"../misc/smoothAnimations\";\n\nexport class PlayerRenderer {\n    mesh?: BABYLON.AbstractMesh;\n    animations: BABYLON.AnimationGroup[] = []\n    animatables?: SmoothAnimation;\n    lookAt?: BABYLON.Mesh | BABYLON.Camera;\n    HEAD?: BABYLON.TransformNode;\n    constructor(private game: Game, private player: BasePlayer) {\n        BABYLON.SceneLoader.ImportMeshAsync(\"\", \"assets/\", \"pingu.glb\", this.game.scene).then(mesh => {\n            this.mesh = mesh.meshes[0]\n            this.mesh.parent = this.player.collider\n            this.mesh.scaling = new BABYLON.Vector3(1, 1, 1)\n            this.mesh.locallyTranslate(new BABYLON.Vector3(0, -2, 0))\n            this.game.skybox.shadowGenerator.addShadowCaster(this.mesh)\n            this.animations = mesh.animationGroups\n            this.animatables = new SmoothAnimation(this.game, this.animations)\n            this.HEAD = this.mesh.getChildTransformNodes().find(t => t.name === 'HEAD')\n        })\n    }\n\n    render(dt: number) {\n        this.animate(dt)\n        this.animatables?.loop()\n        if (this.lookAt && this.HEAD) {\n            this.HEAD.lookAt(this.lookAt.position, -Math.PI / 2, 0, 0, BABYLON.Space.WORLD)\n            if (this.HEAD.rotationQuaternion!.y > 0.5) this.HEAD.rotationQuaternion!.y = 0\n            this.HEAD.rotationQuaternion!.z = 0\n            this.HEAD.rotationQuaternion!.x = 0\n        }\n    }\n\n    animate(dt: number) {\n        if (Math.abs(this.player.realGravityVelocity.y) > 0.10)\n            this.playAnimation('FALLING')\n        else if (this.player.velocity.length() > 0.32)\n            this.playAnimation('SPRINT', this.player.velocity.length() * dt / 2)\n        else if (this.player.velocity.length() > 0.01)\n            this.playAnimation('RUN', this.player.velocity.length() * dt / 2)\n        else this.playAnimation('IDLE')\n    }\n\n    playAnimation(name: string, speed?: number) {\n        if (this.animatables) this.animatables.play(name, speed)\n    }\n\n    destroy() {\n        for (let animation of this.animations) animation.dispose()\n        this.mesh?.dispose()\n    }\n\n}","module.exports = require(\"ammo.js\");","module.exports = require(\"babylonjs\");","module.exports = require(\"babylonjs-gui\");","module.exports = require(\"babylonjs-loaders\");","module.exports = require(\"cookie-parser\");","module.exports = require(\"dayjs\");","module.exports = require(\"dayjs/plugin/duration\");","module.exports = require(\"express\");","module.exports = require(\"gsap\");","module.exports = require(\"path\");","module.exports = require(\"rxjs\");","module.exports = require(\"socket.io\");","module.exports = require(\"tslib\");","module.exports = require(\"http\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./apps/api/src/main.ts\");\n",""],"names":[],"sourceRoot":""}